micronaut:
  server:
    cors:
      enabled: true
      configurations:
        web:
          allowedOrigins:
            - ^http(|s):\/\/localhost:.*$
  security:
    enabled: true
    authentication: idtoken
    oauth2.clients.keycloak:
      grant-type: password
      client-id: ${keyClientId}
      client-secret: ${keyClientSecret}
      token:
        url: http://localhost:8880/auth/realms/security/protocol/openid-connect/token
        auth-method: client_secret_post
      authorization:
        url: http://localhost:8880/auth/realms/security/protocol/open-id-connect/auth
    endpoints:
      login:
        enabled: true
      logout:
        get-allowed: true
    intercept-url-map:
      - pattern: /**
        http-method: GET
        access:
          - isAnonymous()
    reject-not-found: false
    redirect:
      prior-to-login: false
      on-rejection: http://localhost:8880/auth/realms/security/protocol/openid-connect/auth?client_id=micronaut&redirect_uri=http%3A%2F%2Flocalhost%3A8080&state=20450484-9bd5-43ff-83c2-89be1f01a545&response_mode=fragment&response_type=code&scope=openid&nonce=eafe77a3-81a3-4a8a-8c69-23a4f80c3622
      unauthorized:
        url: http://localhost:8880/auth/realms/security/protocol/openid-connect/auth?client_id=micronaut&redirect_uri=http%3A%2F%2Flocalhost%3A8080&state=20450484-9bd5-43ff-83c2-89be1f01a545&response_mode=fragment&response_type=code&scope=openid&nonce=eafe77a3-81a3-4a8a-8c69-23a4f80c3622
      login-success: /
      forbidden:
        url: /forbidden
    session:
      enabled: true
    netty:
      event-loops:
        io:
          num-threads: 3
---
datasources:
  default:
    url: ${JDBC_URL:`jdbc:postgresql://localhost:5432/checkinsdb`}
    username: postgres
    password: "postgres"
---
credentials:
  roles:
    SUPER:
      - ADMIN
      - PDL
      - MEMBER
    ADMIN:
      - ADMIN
    PDL:
      - PDL
    MEMBER:
      - MEMBER
