micronaut:
  server:
    cors:
      enabled: true
      configurations:
        web:
          allowedOrigins:
            - ^http(|s):\/\/localhost:.*$
  security:
    enabled: true
    authentication: idtoken
    token:
    oauth2.clients.keycloak:
      grant-type: password
      client-id: ${keyClientId}
      client-secret: ${keyClientSecret}
      token:
        url: http://localhost:8880/auth/realms/security/protocol/openid-connect/token
        auth-method: client_secret_post
    endpoints:
      login:
        enabled: true
      logout:
        get-allowed: true
    intercept-url-map:
      -
        pattern: /**
        http-method: GET
        access:
          - isAuthenticated()
    reject-not-found: false
    redirect:
      prior-to-login: true
      login-success: /
      on-rejection: /oauth/login/
      unauthorized:
        url: /oauth/login/
      forbidden:
        url: /forbidden
    session:
      enabled: true
    netty:
      event-loops:
        io:
          num-threads: 3
---
datasources:
  default:
    url: ${JDBC_URL:`jdbc:postgresql://localhost:5432/checkinsdb`}
    username: postgres
    password: "postgres"
---
credentials:
  roles:
    SUPER:
      - ADMIN
      - PDL
      - MEMBER
    ADMIN:
      - ADMIN
    PDL:
      - PDL
    MEMBER:
      - MEMBER
